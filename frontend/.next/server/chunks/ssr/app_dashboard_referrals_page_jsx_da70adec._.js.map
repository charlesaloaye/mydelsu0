{"version":3,"sources":["turbopack:///[project]/app/dashboard/referrals/page.jsx"],"sourcesContent":["\"use client\";\nimport React, { useState, useEffect } from \"react\";\nimport AuthGuard from \"../../../components/AuthGuard\";\nimport apiClient from \"../../../lib/api\";\nimport Navbar from \"../../../components/Navbar\";\nimport Link from \"next/link\";\n\nfunction ReferralsPage() {\n  const [showNotifications, setShowNotifications] = useState(false);\n  const [referralTab, setReferralTab] = useState(\"all\");\n  const [copiedLink, setCopiedLink] = useState(false);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(\"\");\n\n  // Live data from backend\n  const [userData, setUserData] = useState({\n    referralCode: \"\",\n    referralLink: \"\",\n    weeklyRank: 0,\n    totalEarned: 0,\n    totalReferred: 0,\n    pendingEarnings: 0,\n  });\n  const [myReferrals, setMyReferrals] = useState([]);\n\n  const filteredReferrals =\n    referralTab === \"pending\"\n      ? myReferrals.filter((ref) => ref.status === \"pending\")\n      : myReferrals;\n\n  const notifications = [\n    {\n      id: 1,\n      message: \"John Doe just activated their account! ₦500 added\",\n      time: \"2 hours ago\",\n      unread: true,\n    },\n    {\n      id: 2,\n      message: \"You moved up to #3 on the leaderboard!\",\n      time: \"5 hours ago\",\n      unread: true,\n    },\n    {\n      id: 3,\n      message: \"Jane Smith verified! ₦500 earned\",\n      time: \"1 day ago\",\n      unread: false,\n    },\n  ];\n\n  const unreadCount = notifications.filter((n) => n.unread).length;\n\n  // Fetch referrals + stats periodically for near-realtime updates\n  useEffect(() => {\n    let isMounted = true;\n\n    const fetchData = async () => {\n      try {\n        setError(\"\");\n        const [statsRes, refsRes] = await Promise.all([\n          apiClient.getReferralStats(),\n          apiClient.getReferrals(),\n        ]);\n\n        if (!isMounted) return;\n\n        // Debug: Log the API response structure\n        console.log(\"Stats response:\", statsRes);\n        console.log(\"Referrals response:\", refsRes);\n\n        setUserData({\n          referralCode: statsRes.data?.referral_code || \"\",\n          referralLink: statsRes.data?.referral_link || \"\",\n          weeklyRank: statsRes.data?.weekly_rank || 0,\n          totalEarned: statsRes.data?.total_earned || 0,\n          totalReferred: statsRes.data?.total_referred || 0,\n          pendingEarnings: statsRes.data?.pending_earnings || 0,\n        });\n\n        // Ensure refsRes.data is an array before mapping\n        const referralsData = Array.isArray(refsRes.data)\n          ? refsRes.data\n          : Array.isArray(refsRes)\n          ? refsRes\n          : [];\n\n        try {\n          const mapped = referralsData.map((r) => ({\n            id: r.id,\n            name: r.name || r.full_name || r.email || \"Unknown\",\n            phone: r.phone || r.whatsapp || \"\",\n            status: r.status || (r.verified ? \"verified\" : \"pending\"),\n            date: r.created_at\n              ? new Date(r.created_at).toISOString().slice(0, 10)\n              : \"\",\n            earnings: r.earnings || r.reward_amount || 0,\n          }));\n          setMyReferrals(mapped);\n        } catch (mapError) {\n          console.error(\"Error mapping referrals data:\", mapError);\n          console.error(\"Referrals data structure:\", referralsData);\n          setMyReferrals([]);\n        }\n      } catch (e) {\n        setError(e?.message || \"Failed to load referrals\");\n      } finally {\n        if (isMounted) setLoading(false);\n      }\n    };\n\n    fetchData();\n    const intervalId = setInterval(fetchData, 10000); // 10s poll\n    return () => {\n      isMounted = false;\n      clearInterval(intervalId);\n    };\n  }, []);\n\n  const copyReferralLink = () => {\n    if (!userData.referralLink) return;\n    navigator.clipboard.writeText(userData.referralLink);\n    setCopiedLink(true);\n    setTimeout(() => setCopiedLink(false), 2000);\n  };\n\n  const shareWhatsApp = () => {\n    const message = `Hey! Join myDelsu and get access to past questions, CGPA calculator, and more student resources. Use my link: ${\n      userData.referralLink || \"https://mydelsu.com/register\"\n    }`;\n    window.open(`https://wa.me/?text=${encodeURIComponent(message)}`, \"_blank\");\n  };\n\n  const ensureReferralLink = async () => {\n    try {\n      if (!userData.referralLink) {\n        const res = await apiClient.generateReferralLink();\n        if (res?.data?.referral_link) {\n          setUserData((prev) => ({\n            ...prev,\n            referralCode: res.data.referral_code || prev.referralCode,\n            referralLink: res.data.referral_link,\n          }));\n        }\n      }\n    } catch (e) {\n      // no-op\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 pb-8\">\n      {/* Header */}\n      <Navbar\n        variant=\"dashboard\"\n        showNotifications={true}\n        notifications={notifications}\n        unreadCount={unreadCount}\n        onNotificationClick={() => setShowNotifications(!showNotifications)}\n        currentPath=\"/dashboard/referrals\"\n      />\n\n      {/* Main Content */}\n      <div className=\"container mx-auto px-4 py-6 max-w-6xl\">\n        {/* Page Title */}\n        <div className=\"mb-6\">\n          <h1 className=\"text-2xl md:text-3xl font-bold text-gray-900\">\n            Referrals\n          </h1>\n          <p className=\"text-gray-600 text-sm mt-1\">\n            Invite friends and earn rewards! 🎁\n          </p>\n        </div>\n\n        {/* Error State */}\n        {error && (\n          <div className=\"mb-4 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded\">\n            {error}\n          </div>\n        )}\n\n        {/* Stats Cards */}\n        <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6\">\n          {/* Weekly Rank */}\n          <div className=\"bg-white border border-gray-200 rounded-xl p-4 shadow-sm hover:shadow-md transition\">\n            <div className=\"flex items-center mb-2\">\n              <span className=\"text-2xl mr-2\">🏆</span>\n              <p className=\"text-sm text-gray-600\">Weekly Rank</p>\n            </div>\n            <p className=\"text-3xl font-bold\" style={{ color: \"#488bbf\" }}>\n              #{userData.weeklyRank}\n            </p>\n          </div>\n\n          {/* Total Earned */}\n          <div className=\"bg-white border border-gray-200 rounded-xl p-4 shadow-sm hover:shadow-md transition\">\n            <div className=\"flex items-center mb-2\">\n              <span className=\"text-2xl mr-2\">💰</span>\n              <p className=\"text-sm text-gray-600\">Total Earned</p>\n            </div>\n            <p className=\"text-3xl font-bold text-green-600\">\n              ₦{Number(userData.totalEarned).toLocaleString()}\n            </p>\n          </div>\n\n          {/* Total Referrals */}\n          <div className=\"bg-white border border-gray-200 rounded-xl p-4 shadow-sm hover:shadow-md transition\">\n            <div className=\"flex items-center mb-2\">\n              <span className=\"text-2xl mr-2\">👥</span>\n              <p className=\"text-sm text-gray-600\">Total Referrals</p>\n            </div>\n            <p className=\"text-3xl font-bold\" style={{ color: \"#488bbf\" }}>\n              {userData.totalReferred}\n            </p>\n          </div>\n\n          {/* Pending */}\n          <div className=\"bg-white border border-gray-200 rounded-xl p-4 shadow-sm hover:shadow-md transition\">\n            <div className=\"flex items-center mb-2\">\n              <span className=\"text-2xl mr-2\">⏳</span>\n              <p className=\"text-sm text-gray-600\">Pending</p>\n            </div>\n            <p className=\"text-3xl font-bold text-amber-600\">\n              ₦{Number(userData.pendingEarnings).toLocaleString()}\n            </p>\n          </div>\n        </div>\n\n        {/* Referral Link Section */}\n        <div className=\"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6\">\n          <h3 className=\"font-semibold text-gray-900 mb-4 flex items-center\">\n            <svg\n              className=\"w-5 h-5 mr-2\"\n              style={{ color: \"#488bbf\" }}\n              fill=\"currentColor\"\n              viewBox=\"0 0 20 20\"\n            >\n              <path d=\"M15 8a3 3 0 10-2.977-2.63l-4.94 2.47a3 3 0 100 4.319l4.94 2.47a3 3 0 10.895-1.789l-4.94-2.47a3.027 3.027 0 000-.74l4.94-2.47C13.456 7.68 14.19 8 15 8z\" />\n            </svg>\n            Your Referral Link\n          </h3>\n\n          {/* Link display with leaderboard button */}\n          <div className=\"flex flex-col sm:flex-row gap-3 mb-4\">\n            <div className=\"flex-1 flex items-center bg-gray-50 rounded-lg px-4 py-3 border border-gray-200\">\n              <input\n                type=\"text\"\n                value={userData.referralLink}\n                readOnly\n                className=\"flex-1 bg-transparent text-gray-700 text-sm outline-none\"\n              />\n              <button\n                onClick={() => {\n                  ensureReferralLink();\n                  copyReferralLink();\n                }}\n                className=\"ml-2 px-4 py-2 rounded-lg font-medium text-sm transition-all text-white\"\n                style={{ backgroundColor: copiedLink ? \"#22c55e\" : \"#488bbf\" }}\n              >\n                {copiedLink ? \"✓ Copied!\" : \"Copy\"}\n              </button>\n            </div>\n            <button\n              onClick={() => (window.location.href = \"/leaderboard\")}\n              className=\"px-6 py-3 bg-white border-2 rounded-lg font-medium hover:text-white transition-all\"\n              style={{ borderColor: \"#488bbf\", color: \"#488bbf\" }}\n              onMouseEnter={(e) => (e.target.style.backgroundColor = \"#488bbf\")}\n              onMouseLeave={(e) => (e.target.style.backgroundColor = \"white\")}\n            >\n              🏆 View Leaderboard\n            </button>\n          </div>\n\n          {/* Share Buttons */}\n          <div className=\"flex flex-wrap gap-2\">\n            <button\n              onClick={shareWhatsApp}\n              className=\"flex items-center space-x-2 px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-lg font-medium transition\"\n            >\n              <svg className=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path d=\"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z\" />\n              </svg>\n              <span>WhatsApp</span>\n            </button>\n            <button className=\"flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition\">\n              <svg className=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path d=\"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z\" />\n              </svg>\n              <span>Facebook</span>\n            </button>\n            <button className=\"flex items-center space-x-2 px-4 py-2 bg-sky-500 hover:bg-sky-600 text-white rounded-lg font-medium transition\">\n              <svg className=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path d=\"M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z\" />\n              </svg>\n              <span>Twitter</span>\n            </button>\n          </div>\n        </div>\n\n        {/* My Referrals */}\n        <div className=\"bg-white border border-gray-200 rounded-xl p-6 shadow-sm mb-6\">\n          <h3 className=\"font-bold text-gray-900 mb-4 text-lg\">My Referrals</h3>\n\n          {/* Tabs */}\n          <div className=\"flex border-b border-gray-200 mb-4\">\n            <button\n              onClick={() => setReferralTab(\"all\")}\n              className={`px-6 py-3 font-medium transition-all border-b-2 ${\n                referralTab === \"all\"\n                  ? \"text-white\"\n                  : \"border-transparent text-gray-500 hover:text-gray-700\"\n              }`}\n              style={\n                referralTab === \"all\"\n                  ? { borderColor: \"#488bbf\", color: \"#488bbf\" }\n                  : {}\n              }\n            >\n              All Referrals ({myReferrals.length})\n            </button>\n            <button\n              onClick={() => setReferralTab(\"pending\")}\n              className={`px-6 py-3 font-medium transition-all border-b-2 ${\n                referralTab === \"pending\"\n                  ? \"text-white\"\n                  : \"border-transparent text-gray-500 hover:text-gray-700\"\n              }`}\n              style={\n                referralTab === \"pending\"\n                  ? { borderColor: \"#488bbf\", color: \"#488bbf\" }\n                  : {}\n              }\n            >\n              Pending (\n              {myReferrals.filter((r) => r.status === \"pending\").length})\n            </button>\n          </div>\n\n          {/* Referrals Grid - 2 columns */}\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            {filteredReferrals.map((referral) => (\n              <div\n                key={referral.id}\n                className=\"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow\"\n              >\n                <div className=\"flex justify-between items-start mb-2\">\n                  <div className=\"flex-1\">\n                    <p className=\"font-semibold text-gray-900\">\n                      {referral.name}\n                    </p>\n                    <p className=\"text-sm text-gray-500\">{referral.phone}</p>\n                  </div>\n                  <span\n                    className={`px-3 py-1 rounded-full text-xs font-medium ${\n                      referral.status === \"verified\"\n                        ? \"bg-green-100 text-green-700\"\n                        : \"bg-amber-100 text-amber-700\"\n                    }`}\n                  >\n                    {referral.status === \"verified\"\n                      ? \"✓ Verified\"\n                      : \"⏳ Pending\"}\n                  </span>\n                </div>\n                <div className=\"flex justify-between items-center pt-2 border-t border-gray-100\">\n                  <p className=\"text-xs text-gray-500\">{referral.date}</p>\n                  {referral.status === \"verified\" && (\n                    <p className=\"text-sm font-semibold text-green-600\">\n                      +₦{referral.earnings}\n                    </p>\n                  )}\n                </div>\n              </div>\n            ))}\n          </div>\n\n          {filteredReferrals.length === 0 && (\n            <div className=\"text-center py-12 text-gray-500\">\n              <p className=\"text-lg mb-2\">\n                No {referralTab === \"pending\" ? \"pending\" : \"\"} referrals yet\n              </p>\n              <p className=\"text-sm\">\n                Share your referral link to start earning!\n              </p>\n            </div>\n          )}\n        </div>\n\n        {/* How It Works */}\n        <div className=\"bg-gray-50 border border-gray-200 rounded-xl p-6\">\n          <h3 className=\"font-bold text-gray-900 mb-4 text-lg\">\n            How Referrals Work\n          </h3>\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n            <div className=\"bg-white border border-gray-200 rounded-lg p-4\">\n              <div\n                className=\"w-12 h-12 rounded-full flex items-center justify-center mb-3\"\n                style={{ backgroundColor: \"#488bbf20\" }}\n              >\n                <span className=\"text-2xl\">1️⃣</span>\n              </div>\n              <h4 className=\"font-semibold text-gray-900 mb-2\">\n                Share Your Link\n              </h4>\n              <p className=\"text-sm text-gray-600\">\n                Copy your unique referral link and share it with friends via\n                WhatsApp, Facebook, or any platform.\n              </p>\n            </div>\n            <div className=\"bg-white border border-gray-200 rounded-lg p-4\">\n              <div className=\"w-12 h-12 rounded-full bg-green-100 flex items-center justify-center mb-3\">\n                <span className=\"text-2xl\">2️⃣</span>\n              </div>\n              <h4 className=\"font-semibold text-gray-900 mb-2\">They Sign Up</h4>\n              <p className=\"text-sm text-gray-600\">\n                When someone registers using your link, they become your\n                referral and you earn rewards!\n              </p>\n            </div>\n            <div className=\"bg-white border border-gray-200 rounded-lg p-4\">\n              <div className=\"w-12 h-12 rounded-full bg-green-100 flex items-center justify-center mb-3\">\n                <span className=\"text-2xl\">3️⃣</span>\n              </div>\n              <h4 className=\"font-semibold text-gray-900 mb-2\">\n                Get Paid ₦500\n              </h4>\n              <p className=\"text-sm text-gray-600\">\n                Once they activate their account, ₦500 is instantly added to\n                your wallet balance!\n              </p>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <style>{`\n        @keyframes fadeIn {\n          from {\n            opacity: 0;\n            transform: translateY(-10px);\n          }\n          to {\n            opacity: 1;\n            transform: translateY(0);\n          }\n        }\n      `}</style>\n    </div>\n  );\n}\n\nexport default function ProtectedReferralsPage() {\n  return (\n    <AuthGuard requireAuth={true}>\n      <ReferralsPage />\n    </AuthGuard>\n  );\n}\n"],"names":[],"mappings":"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"}