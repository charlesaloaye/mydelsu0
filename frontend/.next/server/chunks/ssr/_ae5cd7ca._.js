module.exports=[36415,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(85254),e=a.i(26925),f=a.i(98474);function g({currentPath:a=""}){let{isAuthenticated:g}=(0,e.useAuth)(),[h,i]=(0,c.useState)([]),[j,k]=(0,c.useState)(0);return(0,c.useEffect)(()=>{if(!g)return;let a=async()=>{try{let[a,b]=await Promise.all([f.default.getNotifications(),f.default.getUnreadCount()]);a?.success?i(a.data.data||[]):i([]),b?.success?k(b.data.unread_count||0):k(0)}catch(a){i([]),k(0)}};a();let b=setInterval(a,6e4);return()=>clearInterval(b)},[g]),(0,b.jsx)(d.default,{variant:"dashboard",showNotifications:!0,notifications:h,unreadCount:j,onNotificationClick:()=>{},currentPath:a})}a.s(["default",()=>g])},77725,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(26925),e=a.i(98474),f=a.i(56431),g=a.i(36415),h=a.i(38246);a.s(["default",0,function(){let{user:a,isAuthenticated:i}=(0,d.useAuth)(),[j,k]=(0,c.useState)(!1),[l,m]=(0,c.useState)([]),[n,o]=(0,c.useState)([]),[p,q]=(0,c.useState)({current_page:1,last_page:1,per_page:12,total:0}),[r,s]=(0,c.useState)(!0),[t,u]=(0,c.useState)(!0),[v,w]=(0,c.useState)(!1),[x,y]=(0,c.useState)(!1),[z,A]=(0,c.useState)({search:"",min_price:"",max_price:"",sort_by:"newest"}),[B,C]=(0,c.useState)([]),[D,E]=(0,c.useState)(0);(0,c.useEffect)(()=>{F(),i&&H()},[i]),(0,c.useEffect)(()=>{F()},[z]),(0,c.useEffect)(()=>{let a=()=>{window.innerHeight+document.documentElement.scrollTop>=document.documentElement.offsetHeight-1e3&&r&&!v&&G()};return window.addEventListener("scroll",a),()=>window.removeEventListener("scroll",a)},[r,v]);let F=async()=>{try{u(!0),m([]),o([]),q({current_page:1,last_page:1,per_page:12,total:0}),s(!0);let a=new URLSearchParams;a.append("page","1"),a.append("per_page","12"),z.search&&a.append("search",z.search),z.min_price&&a.append("min_price",z.min_price),z.max_price&&a.append("max_price",z.max_price),z.sort_by&&a.append("sort_by",z.sort_by),console.log("Making API call to: /events?"+a.toString());let b=await e.default.get(`/events?${a.toString()}`);console.log("API response:",b),b.success?(m(b.data),o(b.data),q(b.pagination),s(b.pagination.current_page<b.pagination.last_page)):console.error("Failed to load events:",b.message)}catch(a){console.error("Failed to load events:",a)}finally{u(!1)}},G=async()=>{if(!v&&r)try{w(!0);let a=p.current_page+1,b=new URLSearchParams;b.append("page",a.toString()),b.append("per_page","12"),z.search&&b.append("search",z.search),z.min_price&&b.append("min_price",z.min_price),z.max_price&&b.append("max_price",z.max_price),z.sort_by&&b.append("sort_by",z.sort_by);let c=await e.default.get(`/events?${b.toString()}`);c.success&&(m(a=>{let b=new Set(a.map(a=>a.id)),d=c.data.filter(a=>!b.has(a.id));return[...a,...d]}),o(a=>{let b=new Set(a.map(a=>a.id)),d=c.data.filter(a=>!b.has(a.id));return[...a,...d]}),q(c.pagination),s(c.pagination.current_page<c.pagination.last_page))}catch(a){console.error("Failed to load more events:",a)}finally{w(!1)}},H=async()=>{try{let a=await e.default.getNotifications();if(a.success){let b=a.data.data||[];C(b),E(b.filter(a=>!a.read).length)}}catch(a){console.error("Failed to load notifications:",a)}},I=(a,b)=>{A({...z,[a]:b})};return(0,b.jsx)(f.default,{requireAuth:!1,children:(0,b.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,b.jsx)(g.default,{currentPath:"/dashboard/events"}),(0,b.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Events"}),(0,b.jsx)("p",{className:"text-gray-600",children:"Discover and join exciting events happening around campus"})]}),(0,b.jsx)("div",{className:"mb-8",children:(0,b.jsx)("form",{onSubmit:a=>{a.preventDefault(),A({...z,search:a.target.value})},className:"relative",children:(0,b.jsxs)("div",{className:"flex items-center bg-gray-800 rounded-2xl px-4 py-3 shadow-lg",children:[(0,b.jsx)("svg",{className:"w-5 h-5 text-gray-400 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),(0,b.jsx)("input",{type:"text",value:z.search,onChange:a=>A({...z,search:a.target.value}),placeholder:"Search events...",className:"flex-1 bg-transparent text-white placeholder-gray-400 focus:outline-none"}),(0,b.jsx)("button",{type:"button",onClick:()=>y(!0),className:"ml-3 p-2 text-gray-400 hover:text-white transition-colors duration-200",children:(0,b.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.414A1 1 0 013 6.707V4z"})})})]})})}),t?(0,b.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,b.jsxs)("div",{className:"flex items-center text-gray-600",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#488bbf] mr-3"}),"Loading events..."]})}):n.length>0?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:n.map((a,c)=>(0,b.jsxs)(h.default,{href:`/dashboard/events/${a.id}`,className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden hover:shadow-lg transition-all duration-300 group block",children:[(()=>{let c=null;try{if(a.images){if(Array.isArray(a.images))c=a.images[0];else if("string"==typeof a.images){let b=JSON.parse(a.images);Array.isArray(b)&&b.length>0?c=b[0]:"string"==typeof b&&(c=b)}}}catch(b){c=a.images}return c?(0,b.jsxs)("div",{className:"h-48 bg-gray-200 overflow-hidden",children:[(0,b.jsx)("img",{src:c,alt:a.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300",onError:a=>{a.target.style.display="none",a.target.nextSibling.style.display="flex"}}),(0,b.jsx)("div",{className:"w-full h-full bg-gradient-to-r from-blue-400 to-blue-600 flex items-center justify-center",style:{display:"none"},children:(0,b.jsxs)("div",{className:"text-center text-white",children:[(0,b.jsx)("svg",{className:"w-16 h-16 mx-auto mb-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,b.jsx)("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,b.jsx)("p",{className:"text-lg font-medium",children:"Event Image"})]})})]}):(0,b.jsx)("div",{className:"h-48 bg-gradient-to-r from-blue-400 to-blue-600 flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center text-white",children:[(0,b.jsx)("svg",{className:"w-16 h-16 mx-auto mb-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,b.jsx)("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,b.jsx)("p",{className:"text-lg font-medium",children:"Event Image"})]})})})(),(0,b.jsxs)("div",{className:"p-6",children:[(0,b.jsx)("div",{className:"flex items-start justify-between mb-4",children:(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,b.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:a.category?.charAt(0).toUpperCase()+a.category?.slice(1)||"Event"}),(0,b.jsx)("span",{className:"text-xs text-gray-500",children:new Date(a.created_at).toLocaleDateString()})]}),(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2 group-hover:text-[#488bbf] transition-colors duration-200",children:a.title}),(0,b.jsx)("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:a.description})]})}),(0,b.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-500 mb-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsxs)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),(0,b.jsx)("span",{children:a.location})]}),(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,b.jsx)("span",{children:a.date})]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("div",{className:"text-lg font-bold text-[#488bbf]",children:parseFloat(a.price)>0?(0,b.jsxs)(b.Fragment,{children:["₦",parseFloat(a.price).toLocaleString()]}):(0,b.jsx)("span",{className:"text-green-600",children:"Free"})}),(0,b.jsxs)("div",{className:"text-sm text-gray-500",children:["by ",a.user?.first_name," ",a.user?.last_name]})]})]})]},`${a.id}-${c}`))}),v&&(0,b.jsx)("div",{className:"flex justify-center mt-8",children:(0,b.jsxs)("div",{className:"flex items-center text-gray-600",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-[#488bbf] mr-3"}),"Loading more events..."]})}),!t&&n.length>0&&(0,b.jsx)("div",{className:"flex justify-center items-center mt-6 text-sm text-gray-500",children:(0,b.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,b.jsxs)("span",{children:["Showing ",n.length," of ",p.total," ","events"]}),r&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{children:"•"}),(0,b.jsx)("span",{children:"Scroll down to load more"})]}),!r&&p.total>12&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{children:"•"}),(0,b.jsx)("span",{className:"text-green-600 font-medium",children:"All events loaded"})]})]})})]}):(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)("svg",{className:"w-24 h-24 mx-auto text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,b.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No events found"}),(0,b.jsx)("p",{className:"text-gray-500",children:"Try adjusting your search or filter criteria"})]})]}),x&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,b.jsx)("div",{className:"bg-white rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:(0,b.jsxs)("div",{className:"p-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,b.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:"Filter Events"}),(0,b.jsx)("button",{onClick:()=>y(!1),className:"text-gray-400 hover:text-gray-600",children:(0,b.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Price Range"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,b.jsx)("input",{type:"number",placeholder:"Min price",value:z.min_price,onChange:a=>I("min_price",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#488bbf] focus:border-transparent placeholder-gray-700"}),(0,b.jsx)("input",{type:"number",placeholder:"Max price",value:z.max_price,onChange:a=>I("max_price",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#488bbf] focus:border-transparent placeholder-gray-700"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sort By"}),(0,b.jsxs)("select",{value:z.sort_by,onChange:a=>I("sort_by",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#488bbf] focus:border-transparent placeholder-gray-700",children:[(0,b.jsx)("option",{value:"newest",children:"Newest First"}),(0,b.jsx)("option",{value:"oldest",children:"Oldest First"}),(0,b.jsx)("option",{value:"price-low",children:"Price: Low to High"}),(0,b.jsx)("option",{value:"price-high",children:"Price: High to Low"})]})]})]}),(0,b.jsxs)("div",{className:"flex gap-3 pt-6",children:[(0,b.jsx)("button",{onClick:()=>{A({search:"",min_price:"",max_price:"",sort_by:"newest"})},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors duration-200",children:"Clear"}),(0,b.jsx)("button",{onClick:()=>{y(!1),F()},className:"flex-1 px-4 py-2 bg-[#488bbf] text-white rounded-lg hover:bg-[#3a7bb8] transition-colors duration-200",children:"Apply Filters"})]})]})})})]})})}])}];

//# sourceMappingURL=_ae5cd7ca._.js.map